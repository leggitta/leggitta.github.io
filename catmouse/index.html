<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <title>Game</title>
    <style>
        * { padding: 0; margin: 0; }
        canvas { background: #eee; display: block; margin: 0 auto; }
    </style>
</head>

<body>
<canvas id="myCanvas" width=960" height="640"></canvas>

<script>
    var canvas = document.getElementById("myCanvas");
    var ctx = canvas.getContext("2d");
    
    var x = 100;
    var y = 100;
    var r = 10;
    var dx = 0;
    var dy = 0;
    var acc = 0.1;

    var mouse_x = 700;
    var mouse_y = 500;
    var mouse_speed = 10;
    var mouse_dx = mouse_speed;
    var mouse_dy = mouse_speed;

    var rightPressed = false;
    var leftPressed = false;
    var upPressed = false;
    var downPressed = false;

    function drawBall() {
        ctx.beginPath();
        ctx.arc(x, y, r, 0, Math.PI*2);
        ctx.fillStyle = "#000000"
        ctx.fill();
        ctx.closePath();
    };

    var cat = new Image();
    cat.src = 'cat.jpeg';

    var mouse = new Image();
    mouse.src = 'mouse.jpg';

    function drawCat() {
        ctx.drawImage(cat, x, y);
    }
    function drawMouse() {
        ctx.drawImage(mouse, mouse_x, mouse_y);
    }

    function draw() {
        ctx.clearRect(0, 0, canvas.width, canvas.height);
        //drawBall();
        drawCat();
        drawMouse();

        x += dx;
        y += dy;

        mouse_x += mouse_dx;
        mouse_y += mouse_dy;

        if (rightPressed) {
            dx += acc;
        }
        if (leftPressed) {
            dx -= acc;
        }
        if (upPressed) {
            dy -= acc;
        }
        if (downPressed) {
            dy += acc;
        }

        // prevent cat from running off screen 
        if (x < 0) {
            dx = 0;
            x = 0;
        }
        if (x > canvas.width-50) {
            dx = 0;
            x = canvas.width-50;
        }
        if (y < 0) {
            dy = 0;
            y = 0;
        }
        if (y > canvas.height-50) {
            dy = 0;
            y = canvas.height-50;
        }

        // prevent mouse from running off screen
        if (mouse_x < 0) {
            mouse_dx = mouse_speed;
        } else if (mouse_y < 0) {
            mouse_dy = mouse_speed;
        } else if (mouse_x > canvas.width-30) {
            mouse_dx = -mouse_speed;
        } else if (mouse_y > canvas.height-30) {
            mouse_dy = -mouse_speed;
        }

        // win the game
        if (Math.pow(x - mouse_x, 2) + Math.pow(y - mouse_y, 2) < 10) {
            mouse_dx = 0;
            mouse_dy = 0;        
        }
        console.log(mouse_x, mouse_y);

    };
    document.addEventListener("keydown", keyDownHandler, false);
    document.addEventListener("keyup", keyUpHandler, false);

    function keyDownHandler(e) {
        //console.log(e);
        //console.log(cat);
        if (e.key == "Right" || e.key == "ArrowRight") {
            rightPressed = true;
        } else if (e.key == "Left" || e.key == "ArrowLeft") {
            leftPressed = true;
        } else if (e.key == "Up" || e.key == "ArrowUp") {
            upPressed = true;
        } else if (e.key == "Down" || e.key == "ArrowDown") {
            downPressed = true;
        }
    }
    function keyUpHandler(e) {
        //console.log(e);
        if (e.key == "Right" || e.key == "ArrowRight") {
            rightPressed = false;
        } else if (e.key == "Left" || e.key == "ArrowLeft") {
            leftPressed = false;
        } else if (e.key == "Up" || e.key == "ArrowUp") {
            upPressed = false;
        } else if (e.key == "Down" || e.key == "ArrowDown") {
            downPressed = false;
        }
    }
    var interval = setInterval(draw, 10);

</script>

</body>

</html>
